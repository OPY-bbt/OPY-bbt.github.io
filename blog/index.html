<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="logo.png">

    <title>Cape of Good Hope</title>

    <!-- Bootstrap core CSS -->
    <link href="source/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="blog.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="source/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav">
          <a class="blog-nav-item active" href="#">Home</a>
          <a class="blog-nav-item" href="#">All articles</a>
           <!-- <a class="blog-nav-item" href="#">Press</a>
          <a class="blog-nav-item" href="#">New hires</a> -->
          <a class="blog-nav-item" href="#">About</a>
        </nav>
      </div>
    </div>

    <div class="container">

      <div class="blog-header">
        <h1 class="blog-title">The GeFeng’s Blog</h1>
        <p class="lead blog-description">Funning toys will be discovered here.</p>
      </div>

      <div class="row wrap">

        <div class="col-sm-8 blog-main">

          <div class="blog-post">
            <h2 class="blog-post-title">Read jQuery code [1] </h2>
            <p class="blog-post-meta">April 20, 2016 </p>

            <p>The first day to read jQuery code</p>
            <hr>
            <pre>
              /*
                *jQuery 整体框架 运用匿名函数自执行，解决解决命名空间与变量污染的问题
              */

              (function(window,undefined){
                var jQuery = function() {}
                  // ...
                window.jQuery = window.$ = jQuery;
              })(window);
            </pre>
            <blockquote>
              <p>Curabitur blandit tempus porttitor. <strong>Nullam quis risus eget urna mollis</strong> ornare vel eu leo. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </blockquote>
            <pre>
              /*
                *类数组对象结构（工厂方法创建）
                函数aQuery()内部首先保证了必须是通过new操作符构建。
                这样就能保证当前构建的是一个带有this的实例对象，既然是对象我们可以把所有的属性与方法作为对象的key与value的方式给映射到this上，所以如上结构就可以模拟出jQuery的这样的操作了，即可通过索引取值，也可以链式方法取值
              */

              var aQuery = function(selector) {
                //强制为对象
                if(!(this instanceof aQuery)) {
                  return new aQuery(selector);
               }
                var elem = document.getElementById(/[^#].*/).exec(selector)[0]);
                this.length = 1;
                this[0] = elem;
                this.context = document;
                this.selector = selector;
                this.get = function(num) {
                  return this[num];
                }
                return this;
              }
              aQuery('#xx')[0] = aQuery('#xx').get(0)
            </pre>
            <blockquote>
              <p>Curabitur blandit tempus porttitor. <strong>Nullam quis risus eget urna mollis</strong> ornare vel eu leo. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </blockquote>
            <pre>
              /*
                *jQuery 中ready 与 load事件
              */

              //jQuery中有三种文档加载的方法
              $(document).ready(function(){
                //...
              }) 

              $(function(){
                //...
              })

              $(document).load(function(){
                //...
              })

              //其中 ready先执行，load后执行。
              //原因是 DOM文档加载的步骤是 
              //1.解析HTML结构 
              //2.加载外部脚本和样式表文件 
              //3.解析并执行脚本代码 
              //4.构造HTML DOM模型。(ready)
              //5.加载图片等外部文件。
              //6.页面加载完毕。(load)
            </pre>

            <blockquote>
              <p>Curabitur blandit tempus porttitor. <strong>Nullam quis risus eget urna mollis</strong> ornare vel eu leo. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </blockquote>

            <pre>
              /*
                *对象的构建
              */
              jQuery = function( selector,context) {
                return new jQuery.fn.init( selector,context);
              }

              jQuery.fn = jQuery.prototype = {
                init: function(){
                  return this
                },
                jquery: version,
                constructor: jQuery,
                ....
              }
            </pre>

            <blockquote>
              <p>Curabitur blandit tempus porttitor. <strong>Nullam quis risus eget urna mollis</strong> ornare vel eu leo. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </blockquote>

            <pre>
              /*
                *静态与实例方法共享设计
              */
              var $$ = ajQuery = function(selector) {
                return new ajQuery.fn.init(selector);
              }
              ajQuery.fn = ajQuery.prototype = {
                name: 'name',
                init: function(selector) {
                  this.selector = selector;
                  return this;
                },
                constructor: ajQuery
              }
              //this code is very important
              ajQuery.fn.init.prototype = ajQuery.fn;

              ajQuery.fn.say = function() {
                $('#xx').html(this.name);
              }

              $$().say();
            </pre>

            <blockquote>
              <p>Curabitur blandit tempus porttitor. <strong>Nullam quis risus eget urna mollis</strong> ornare vel eu leo. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </blockquote>

            <pre>
              /*
                *方法链式调用的实现
              */
              aQuery.prototype = {
                init: function() {
                  return this;
                },
                name: function() {
                  return this
                }
              }
              //通过返回当前实例的this，从而又可以访问自己的原型。
            </pre>

            <blockquote>
              <p>Curabitur blandit tempus porttitor. <strong>Nullam quis risus eget urna mollis</strong> ornare vel eu leo. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </blockquote>

            <pre>
              /*
                *插件接口的设计
              */

              //两种方法： $.extend()、$.fn.extend
              //第一种是挂在jQuery命名空间下的全局函数，可称为静态方法；
              //第二种是jQuery对象级别的方法，挂在原型下面
              //调用jQuery对象，所以扩展在jQuery上。因为jQuery.fn = jQuery
              var $$ = ajQuery = function (selector) {
                return new ajQuery.fn.init(selector);
              }

              ajQuery.fn. = ajQuery.prototype = {
                name: 'zhang',
                init: function(selector) {
                  this.selector = selector;
                  return this;
                },
                constructor: ajQuery
              }

              ajQuery.fn.init.prototype = ajQuery.fn;

              ajQuery.extend = ajQuery.fn.extend = function() {
                var options, src, copy,
                  target = arguments[0] || {},
                  i = 1,
                  length = arguments.length;

                  //只有一个参数，就是对jQuery自身的扩展处理
                  //extend,fn.extend
                  if (i === length) {
                    target = this; //调用的上下文对象jQuery或者实例
                    i--;
                  }
                  for (; i < length; i++) {
                    //从i开始取参数,不为空开始遍历
                    if ((options = arguments[i]) != null) {
                      for (name in options) {
                      copy = options[name];
                      //覆盖拷贝
                      target[name] = copy;
                    }
                  }
                }
                return target;
              }

              ajQuery.fn.extend({
                setName: function(myName) {
                  this.myName = myName
                  return this;
                },
                getName: function() {
                  $("#xx").html(this.myName)
                  return this;
                }
              })

              $$().setName('zhang').getName();
            </pre>

          </div><!-- /.blog-post -->

          <nav>
            <ul class="pager">
              <li><a href="#">Previous</a></li>
              <li><a href="#">Next</a></li>
            </ul>
          </nav>

        </div><!-- /.blog-main -->

        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          <div class="sidebar-module sidebar-module-inset">
            <h4>About</h4>
            <p>This website is like article,but you can find lots of funning things at here.<br>
            When editting this page,the date is April 19,2016.</p>
          </div>
          <div class="sidebar-module">
            <h4>Web Fonter</h4>
            <ol class="list-unstyled">
              <li><a href="#">Read jQuery code [1] <br>
              (April 20 2016)</a></li>
            </ol>
          </div>
          <div class="sidebar-module">
            <h4>Linux</h4>
            <ol class="list-unstyled">
              <li></li>
            </ol>
          </div>
        </div><!-- /.blog-sidebar -->

      </div><!-- /.row -->

    </div><!-- /.container -->

    <footer class="blog-footer">
      <p>If you want to know more about me 
        <a href="about.html">Click!</a>
      </p>
      <p>
        <a href="#">Back to top</a>
      </p>
    </footer>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="source/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="source/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
